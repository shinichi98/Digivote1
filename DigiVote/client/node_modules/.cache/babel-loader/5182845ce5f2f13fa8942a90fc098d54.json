{"ast":null,"code":"import _regeneratorRuntime from \"/home/utkarsh/study2/proj/DigiVote/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/home/utkarsh/study2/proj/DigiVote/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"/home/utkarsh/study2/proj/DigiVote/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/utkarsh/study2/proj/DigiVote/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/utkarsh/study2/proj/DigiVote/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/utkarsh/study2/proj/DigiVote/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/utkarsh/study2/proj/DigiVote/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/home/utkarsh/study2/proj/DigiVote/client/src/Anaylsis Report/Pre-Anaylsis.jsx\";\nimport React, { Component } from 'react';\nimport Paper from '@material-ui/core/Paper';\nimport Grid from '@material-ui/core/Grid';\nimport Typography from '@material-ui/core/Typography';\nimport Home from '@material-ui/icons/Home';\nimport ExpansionPanel from '@material-ui/core/ExpansionPanel';\nimport ExpansionPanelSummary from '@material-ui/core/ExpansionPanelSummary';\nimport ExpansionPanelDetails from '@material-ui/core/ExpansionPanelDetails';\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\nimport Fade from '@material-ui/core/Fade';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport { Chart } from \"react-google-charts\";\nimport { ipfsFetcher } from '../ipfsStore';\n\nvar Pre_Analysis = /*#__PURE__*/function (_Component) {\n  _inherits(Pre_Analysis, _Component);\n\n  function Pre_Analysis(props) {\n    var _this;\n\n    _classCallCheck(this, Pre_Analysis);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Pre_Analysis).call(this, props));\n    _this.componentWillMount = /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      var contract, totalVoter, totalVoting, Array18To30, Array31To50, Array51To150, i, voterHash, voterData, voterAge, candidates, candidatesData, candidateHash, _i, candidateData, groupBy, groupbyParties, candidateByParties, newArray;\n\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              contract = _this.props.userObject.contract; //call for total number of Voter in the Election\n\n              totalVoter = _this.props.selectedElection.election.TotalVoters; //call for total voting held in Election\n\n              totalVoting = 0;\n              _context.next = 5;\n              return contract.methods.aadhaarCount(_this.props.selectedElection.electionHash).call().then(function (res) {\n                return totalVoting = res;\n              }).catch(console.error);\n\n            case 5:\n              //calling for the voter age grouping that voted in election\n              Array18To30 = [], Array31To50 = [], Array51To150 = [];\n              i = 0;\n\n            case 7:\n              if (!(i < totalVoting)) {\n                _context.next = 21;\n                break;\n              }\n\n              voterHash = void 0;\n              _context.next = 11;\n              return contract.methods.getVoterToElection(_this.props.selectedElection.electionHash, i).call().then(function (res) {\n                return voterHash = res;\n              }).catch(console.error);\n\n            case 11:\n              _context.next = 13;\n              return ipfsFetcher(voterHash);\n\n            case 13:\n              voterData = _context.sent;\n              voterAge = new Date().getFullYear() - voterData.DoB.substring(6, 10);\n              if (voterAge >= 18 && voterAge <= 30) Array18To30.push(voterAge);\n              if (voterAge >= 31 && voterAge <= 50) Array31To50.push(voterAge);\n              if (voterAge >= 51 && voterAge <= 150) Array51To150.push(voterAge);\n\n            case 18:\n              i++;\n              _context.next = 7;\n              break;\n\n            case 21:\n              //calling for assosiated Election Party Candidate \n              candidates = _this.props.selectedElection.candidates;\n              candidatesData = [];\n              _i = 1;\n\n            case 24:\n              if (!(_i < candidates.length)) {\n                _context.next = 35;\n                break;\n              }\n\n              console.log(candidates[_i][0]);\n              _context.next = 28;\n              return contract.methods.getCandidatePersonal(candidates[_i][0]).call().then(function (res) {\n                return candidateHash = res;\n              }).catch(console.error);\n\n            case 28:\n              _context.next = 30;\n              return ipfsFetcher(candidateHash);\n\n            case 30:\n              candidateData = _context.sent;\n              candidatesData.push(candidateData);\n\n            case 32:\n              _i++;\n              _context.next = 24;\n              break;\n\n            case 35:\n              //functions for grouping the Candiates from there respective political parties\n              groupBy = function groupBy(key) {\n                return function (array) {\n                  return array.reduce(function (objectsByKeyValue, obj) {\n                    var value = obj[key];\n                    objectsByKeyValue[value] = (objectsByKeyValue[value] || []).concat(obj);\n                    return objectsByKeyValue;\n                  }, {});\n                };\n              }; //preparing a template function for groupby parties from any array object\n\n\n              groupbyParties = groupBy('ElectionParty'); // //preparing the template function for group by constituency(places) of the candidates.\n              // const groupByConstituency = groupBy(2) \n              //calling that function with candidates data object to group it by the parties\n\n              candidateByParties = groupbyParties(candidatesData); // //calling that function with  total numbe of candidates of an election to be group by constituencies\n              // let candidateByConstituency = groupByConstituency(candidates) \n\n              newArray = Object.entries(candidateByParties);\n\n              _this.setState({\n                totalVoter: totalVoter,\n                totalVoting: totalVoting,\n                Array18To30: Array18To30,\n                Array31To50: Array31To50,\n                Array51To150: Array51To150,\n                candidatesData: candidatesData,\n                candidateByParties: newArray\n              });\n\n            case 40:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n    _this.state = {\n      totalVoter: 0,\n      totalVoting: 0,\n      Array18To30: [],\n      Array31To50: [],\n      Array51To150: [],\n      candidatesData: [],\n      candidateByParties: []\n    };\n    return _this;\n  }\n\n  _createClass(Pre_Analysis, [{\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      return /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 116,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(Fade, {\n        in: this.state.loaderStart === true,\n        unmountOnExit: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 117,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(Grid, {\n        container: true,\n        direction: \"row\",\n        justify: \"center\",\n        alignItems: \"center\",\n        className: \"loaderDiv1\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 121,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(CircularProgress, {\n        className: \"loader\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 128,\n          columnNumber: 17\n        }\n      }))), /*#__PURE__*/React.createElement(Grid, {\n        container: true,\n        direction: \"row\",\n        justify: \"center\",\n        alignItems: \"center\",\n        className: \"ResultBack\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 131,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(Grid, {\n        item: true,\n        xs: 12,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 138,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(Paper, {\n        elevation: 2,\n        className: \"ElectionHeader\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 139,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(Typography, {\n        variant: \"h4\",\n        gutterBottom: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 143,\n          columnNumber: 21\n        }\n      }, \"Pre Election Report\"))), /*#__PURE__*/React.createElement(Grid, {\n        container: true,\n        className: \"ResultBody\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 146,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(Grid, {\n        container: true,\n        spacing: 16,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 147,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(Grid, {\n        item: true,\n        xs: 12,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 148,\n          columnNumber: 17\n        }\n      }, this.state.totalVoter && /*#__PURE__*/React.createElement(Grid, {\n        container: true,\n        justify: \"center\",\n        spacing: 32,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 151,\n          columnNumber: 28\n        }\n      }, /*#__PURE__*/React.createElement(Grid, {\n        item: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 152,\n          columnNumber: 33\n        }\n      }, /*#__PURE__*/React.createElement(Chart, {\n        width: '300px',\n        height: '300px',\n        chartType: \"PieChart\",\n        data: [['Election', \"Voter's Age\"], ['Young Voters (18-30)', this.state.Array18To30.length], ['Adult Voters (31-50)', this.state.Array31To50.length], ['Old Age Voters (18-30)', this.state.Array51To150.length]],\n        options: {\n          title: 'Age Group Voter Percentage',\n          // Just add this option\n          pieHole: 0.6\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 153,\n          columnNumber: 37\n        }\n      })), /*#__PURE__*/React.createElement(Grid, {\n        item: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 170,\n          columnNumber: 33\n        }\n      }, /*#__PURE__*/React.createElement(Chart, {\n        width: '300px',\n        height: '300px',\n        chartType: \"PieChart\",\n        data: [['Election', 'Votes'], ['Non Voters', this.state.totalVoter - this.state.totalVoting], ['Voting', this.state.totalVoting]],\n        options: {\n          title: 'Total Voting Percentage',\n          // Just add this option\n          pieHole: 0.6\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 171,\n          columnNumber: 41\n        }\n      }))))), /*#__PURE__*/React.createElement(Grid, {\n        container: true,\n        spacing: 16,\n        style: {\n          marginTop: \"50px\",\n          marginBottom: \"50px\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 191,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(Grid, {\n        item: true,\n        xs: 12,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 192,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(Grid, {\n        container: true,\n        justify: \"center\",\n        spacing: 32,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 193,\n          columnNumber: 17\n        }\n      }, this.state.candidateByParties.map(function (party, index) {\n        return /*#__PURE__*/React.createElement(Grid, {\n          key: index,\n          item: true,\n          xs: 4,\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 195,\n            columnNumber: 21\n          }\n        }, /*#__PURE__*/React.createElement(ExpansionPanel, {\n          className: \"PartyCategory\",\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 196,\n            columnNumber: 26\n          }\n        }, /*#__PURE__*/React.createElement(ExpansionPanelSummary, {\n          expandIcon: /*#__PURE__*/React.createElement(ExpandMoreIcon, {\n            __self: _this2,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 197,\n              columnNumber: 64\n            }\n          }),\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 197,\n            columnNumber: 29\n          }\n        }, /*#__PURE__*/React.createElement(Grid, {\n          container: true,\n          justify: \"center\",\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 198,\n            columnNumber: 29\n          }\n        }, /*#__PURE__*/React.createElement(Grid, {\n          item: true,\n          xs: 12,\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 199,\n            columnNumber: 33\n          }\n        }, /*#__PURE__*/React.createElement(Typography, {\n          variant: \"h6\",\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 200,\n            columnNumber: 37\n          }\n        }, party[0])), /*#__PURE__*/React.createElement(Grid, {\n          item: true,\n          xs: 12,\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 202,\n            columnNumber: 33\n          }\n        }, /*#__PURE__*/React.createElement(Typography, {\n          variant: \"subtitle2\",\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 203,\n            columnNumber: 37\n          }\n        }, \"Nominated Candidates\")))), /*#__PURE__*/React.createElement(ExpansionPanelDetails, {\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 207,\n            columnNumber: 29\n          }\n        }, /*#__PURE__*/React.createElement(Grid, {\n          container: true,\n          justify: \"center\",\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 208,\n            columnNumber: 29\n          }\n        }, party[1].map(function (candidate, index) {\n          return /*#__PURE__*/React.createElement(Grid, {\n            container: true,\n            key: index,\n            item: true,\n            xs: 12,\n            __self: _this2,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 211,\n              columnNumber: 37\n            }\n          }, /*#__PURE__*/React.createElement(Grid, {\n            item: true,\n            xs: 6,\n            __self: _this2,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 212,\n              columnNumber: 41\n            }\n          }, /*#__PURE__*/React.createElement(Typography, {\n            variant: \"subtitle1\",\n            className: \"CandidateName\",\n            color: \"textPrimary\",\n            gutterBottom: true,\n            __self: _this2,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 213,\n              columnNumber: 45\n            }\n          }, candidate.Name)), /*#__PURE__*/React.createElement(Grid, {\n            item: true,\n            xs: 6,\n            __self: _this2,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 217,\n              columnNumber: 41\n            }\n          }, /*#__PURE__*/React.createElement(Typography, {\n            variant: \"subtitle1\",\n            className: \"CandidateVote\",\n            color: \"textPrimary\",\n            gutterBottom: true,\n            __self: _this2,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 218,\n              columnNumber: 45\n            }\n          }, candidate.constituency)), /*#__PURE__*/React.createElement(\"hr\", {\n            __self: _this2,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 222,\n              columnNumber: 41\n            }\n          }));\n        })))));\n      }))))), /*#__PURE__*/React.createElement(Home, {\n        className: \"HomeIcon\",\n        style: {\n          color: \"#fff\"\n        },\n        onClick: function onClick() {\n          return _this2.props.updateHomeState(0, null);\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 235,\n          columnNumber: 13\n        }\n      })));\n    }\n  }]);\n\n  return Pre_Analysis;\n}(Component);\n\nexport { Pre_Analysis as default };","map":{"version":3,"sources":["/home/utkarsh/study2/proj/DigiVote/client/src/Anaylsis Report/Pre-Anaylsis.jsx"],"names":["React","Component","Paper","Grid","Typography","Home","ExpansionPanel","ExpansionPanelSummary","ExpansionPanelDetails","ExpandMoreIcon","Fade","CircularProgress","Chart","ipfsFetcher","Pre_Analysis","props","componentWillMount","contract","userObject","totalVoter","selectedElection","election","TotalVoters","totalVoting","methods","aadhaarCount","electionHash","call","then","res","catch","console","error","Array18To30","Array31To50","Array51To150","i","voterHash","getVoterToElection","voterData","voterAge","Date","getFullYear","DoB","substring","push","candidates","candidatesData","length","log","getCandidatePersonal","candidateHash","candidateData","groupBy","key","array","reduce","objectsByKeyValue","obj","value","concat","groupbyParties","candidateByParties","newArray","Object","entries","setState","state","loaderStart","title","pieHole","marginTop","marginBottom","map","party","index","candidate","Name","constituency","color","updateHomeState"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport Paper from '@material-ui/core/Paper';\nimport Grid from '@material-ui/core/Grid';\nimport Typography from '@material-ui/core/Typography';\nimport Home from '@material-ui/icons/Home';\nimport ExpansionPanel from '@material-ui/core/ExpansionPanel';\nimport ExpansionPanelSummary from '@material-ui/core/ExpansionPanelSummary';\nimport ExpansionPanelDetails from '@material-ui/core/ExpansionPanelDetails';\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\nimport Fade from '@material-ui/core/Fade';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport { Chart } from \"react-google-charts\";\nimport { ipfsFetcher } from '../ipfsStore';\n\nexport default class Pre_Analysis extends Component{\n\n    constructor(props){\n        super(props)\n        this.state = {\n            totalVoter     : 0,\n            totalVoting    : 0,\n            Array18To30    : [],\n            Array31To50    : [],\n            Array51To150   : [],\n            candidatesData : [],\n            candidateByParties : []\n        }\n    }\n\n    componentWillMount = async() => {\n\n        const {contract} = this.props.userObject\n\n        //call for total number of Voter in the Election\n        let totalVoter = this.props.selectedElection.election.TotalVoters\n\n        //call for total voting held in Election\n        let totalVoting = 0\n        await contract.methods.aadhaarCount(this.props.selectedElection.electionHash).call()\n        .then(res => totalVoting = res)\n        .catch(console.error)\n\n        //calling for the voter age grouping that voted in election\n        let Array18To30 = [],\n            Array31To50 = [],\n            Array51To150 = []\n\n        for(let i=0; i<totalVoting; i++){\n\n            let voterHash\n            await contract.methods.getVoterToElection(this.props.selectedElection.electionHash, i).call()\n            .then(res => voterHash = res)\n            .catch(console.error)\n\n            let voterData = await ipfsFetcher(voterHash)\n            let voterAge = new Date().getFullYear() - voterData.DoB.substring(6,10)\n\n            if(voterAge >= 18 && voterAge <= 30)  Array18To30.push(voterAge)\n            if(voterAge >= 31 && voterAge <= 50)  Array31To50.push(voterAge)\n            if(voterAge >= 51 && voterAge <= 150) Array51To150.push(voterAge)\n\n        }\n\n        //calling for assosiated Election Party Candidate \n        const {candidates} = this.props.selectedElection\n        \n        let candidatesData = [],\n            candidateHash\n\n        for(let i=1; i<candidates.length; i++){\n            console.log(candidates[i][0])\n            await contract.methods.getCandidatePersonal(candidates[i][0]).call()\n            .then(res => candidateHash = res)\n            .catch(console.error)\n\n            let candidateData = await ipfsFetcher(candidateHash)\n\n            candidatesData.push(candidateData)\n\n        }\n\n        //functions for grouping the Candiates from there respective political parties\n        const groupBy = key => array =>\n            array.reduce((objectsByKeyValue, obj) => {\n                const value = obj[key];\n                objectsByKeyValue[value] = (objectsByKeyValue[value] || []).concat(obj);\n                return objectsByKeyValue;\n        }, {});\n\n        //preparing a template function for groupby parties from any array object\n        const groupbyParties = groupBy('ElectionParty')\n        // //preparing the template function for group by constituency(places) of the candidates.\n        // const groupByConstituency = groupBy(2) \n\n        //calling that function with candidates data object to group it by the parties\n        let candidateByParties = groupbyParties(candidatesData)\n\n        // //calling that function with  total numbe of candidates of an election to be group by constituencies\n        // let candidateByConstituency = groupByConstituency(candidates) \n\n        let newArray = Object.entries(candidateByParties)\n\n        this.setState({\n            totalVoter,\n            totalVoting,\n            Array18To30,\n            Array31To50,\n            Array51To150,\n            candidatesData,\n            candidateByParties : newArray\n        })\n    }\n\n    render(){\n        return(\n            <div>\n                <Fade\n                in={this.state.loaderStart === true}\n                unmountOnExit\n            >\n                <Grid \n                    container \n                    direction=\"row\"\n                    justify=\"center\"\n                    alignItems=\"center\"\n                    className=\"loaderDiv1\"\n                >\n                <CircularProgress className=\"loader\"/>\n                </Grid>\n            </Fade>\n                <Grid \n              container \n              direction=\"row\"\n              justify=\"center\"\n              alignItems=\"center\"\n              className=\"ResultBack\"\n          >\n            <Grid item xs={12}>\n                <Paper \n                      elevation={2}\n                      className=\"ElectionHeader\"\n                >\n                    <Typography variant=\"h4\" gutterBottom>Pre Election Report</Typography>\n                </Paper>\n            </Grid>\n            <Grid container className=\"ResultBody\">\n            <Grid container spacing={16}>\n                <Grid item xs={12}>\n                {\n                    this.state.totalVoter\n                        && <Grid container  justify=\"center\" spacing={32}>\n                                <Grid item>\n                                    <Chart\n                                        width={'300px'}\n                                        height={'300px'}\n                                        chartType=\"PieChart\"\n                                        data={[\n                                            ['Election', \"Voter's Age\"],\n                                            ['Young Voters (18-30)', this.state.Array18To30.length],\n                                            ['Adult Voters (31-50)', this.state.Array31To50.length],\n                                            ['Old Age Voters (18-30)', this.state.Array51To150.length]\n                                        ]}\n                                        options={{\n                                            title: 'Age Group Voter Percentage',\n                                            // Just add this option\n                                            pieHole: 0.6,\n                                        }}\n                                    />\n                                </Grid>\n                                <Grid item>\n                                        <Chart\n                                            width={'300px'}\n                                            height={'300px'}\n                                            chartType=\"PieChart\"\n                                            data={[\n                                                ['Election', 'Votes'],\n                                                ['Non Voters', (this.state.totalVoter-this.state.totalVoting)],\n                                                ['Voting', this.state.totalVoting]\n                                            ]}\n                                            options={{\n                                                title: 'Total Voting Percentage',\n                                                // Just add this option\n                                                pieHole: 0.6,\n                                            }}\n                                    />\n                                </Grid>  \n                        </Grid>\n                }\n                </Grid>\n            </Grid>\n            <Grid container spacing={16} style={{ marginTop : \"50px\", marginBottom : \"50px\"}}>\n                <Grid item xs={12}>\n                <Grid container  justify=\"center\" spacing={32}>\n                    {this.state.candidateByParties.map((party, index)  => (\n                    <Grid key={index} item xs={4}>\n                         <ExpansionPanel className=\"PartyCategory\">\n                            <ExpansionPanelSummary expandIcon={<ExpandMoreIcon />}>\n                            <Grid container  justify=\"center\" > \n                                <Grid item xs={12}>\n                                    <Typography variant=\"h6\">{party[0]}</Typography>\n                                </Grid>\n                                <Grid item xs={12}>\n                                    <Typography variant=\"subtitle2\">Nominated Candidates</Typography>\n                                </Grid>\n                            </Grid>                                               \n                            </ExpansionPanelSummary>\n                            <ExpansionPanelDetails>\n                            <Grid container  justify=\"center\" > \n                               {\n                                   party[1].map((candidate, index)=>\n                                    <Grid container key={index} item xs={12}>\n                                        <Grid item xs={6}>\n                                            <Typography variant=\"subtitle1\" className=\"CandidateName\" color=\"textPrimary\" gutterBottom>\n                                                {candidate.Name}\n                                            </Typography> \n                                        </Grid>\n                                        <Grid item xs={6}>\n                                            <Typography variant=\"subtitle1\" className=\"CandidateVote\" color=\"textPrimary\" gutterBottom>\n                                                {candidate.constituency}\n                                            </Typography>\n                                        </Grid>\n                                        <hr />\n                                    </Grid>\n                                   )\n                               }        \n                            </Grid>\n                            </ExpansionPanelDetails>\n                        </ExpansionPanel>\n                    </Grid>\n                    ))}\n                </Grid>\n                </Grid>\n            </Grid>\n            </Grid>\n            <Home className=\"HomeIcon\" style={{ color: \"#fff\"}} onClick={() => this.props.updateHomeState(0, null)} />\n        </Grid>\n            </div>\n        )\n    }\n} "]},"metadata":{},"sourceType":"module"}