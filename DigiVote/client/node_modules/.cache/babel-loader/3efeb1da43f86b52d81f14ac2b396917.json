{"ast":null,"code":"import _regeneratorRuntime from \"/home/utkarsh/study2/proj/DigiVote/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/home/utkarsh/study2/proj/DigiVote/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"/home/utkarsh/study2/proj/DigiVote/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/utkarsh/study2/proj/DigiVote/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/utkarsh/study2/proj/DigiVote/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/utkarsh/study2/proj/DigiVote/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/utkarsh/study2/proj/DigiVote/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/home/utkarsh/study2/proj/DigiVote/client/src/Organizer/CandidateRequest.jsx\";\nimport React, { Component } from 'react';\nimport Card from '@material-ui/core/Card';\nimport CardActions from '@material-ui/core/CardActions';\nimport CardContent from '@material-ui/core/CardContent';\nimport Button from '@material-ui/core/Button';\nimport Typography from '@material-ui/core/Typography';\nimport { ipfsFetcher } from '../ipfsStore';\nimport Person from '@material-ui/icons/Person';\nimport Fade from '@material-ui/core/Fade';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport \"../App.css\";\n\nvar CandidateRequest = /*#__PURE__*/function (_Component) {\n  _inherits(CandidateRequest, _Component);\n\n  function CandidateRequest(props) {\n    var _this;\n\n    _classCallCheck(this, CandidateRequest);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(CandidateRequest).call(this, props));\n    _this.componentWillMount = /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      var electionData;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _this.setState({\n                loaderStart: true\n              });\n\n              _context.next = 3;\n              return ipfsFetcher(_this.props.electionHash);\n\n            case 3:\n              electionData = _context.sent;\n\n              _this.setState({\n                electionData: electionData,\n                loaderStart: false\n              });\n\n            case 5:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    _this.doApprove = /*#__PURE__*/function () {\n      var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(name) {\n        var _this$props$userObjec, contract, accounts, _this$props, RequesterUsername, index, electionHash, length, i, result;\n\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _this.setState({\n                  loaderStart: true\n                });\n\n                _this$props$userObjec = _this.props.userObject, contract = _this$props$userObjec.contract, accounts = _this$props$userObjec.accounts;\n                _this$props = _this.props, RequesterUsername = _this$props.RequesterUsername, index = _this$props.index, electionHash = _this$props.electionHash;\n                length = 0;\n                _context2.next = 6;\n                return contract.methods.candidateRequestsCount(RequesterUsername).call().then(function (res) {\n                  return length = res;\n                }).catch(console.error);\n\n              case 6:\n                i = 0;\n\n              case 7:\n                if (!(i < length)) {\n                  _context2.next = 27;\n                  break;\n                }\n\n                result = void 0;\n                _context2.next = 11;\n                return contract.methods.getRequest(RequesterUsername, i).call().then(function (res) {\n                  return result = res;\n                }).catch(console.error);\n\n              case 11:\n                if (!(result[1] === electionHash)) {\n                  _context2.next = 24;\n                  break;\n                }\n\n                if (!(name === 'Approve')) {\n                  _context2.next = 16;\n                  break;\n                }\n\n                _context2.next = 15;\n                return contract.methods.updateRequestStatus(index, i, RequesterUsername, \"Approved\").send({\n                  from: accounts[2],\n                  gas: 6721975\n                }).then(function (receipt) {\n                  console.log(receipt);\n                }).catch(function (error) {\n                  console.log(error);\n                });\n\n              case 15:\n                _this.setState({\n                  isRequested: false,\n                  isApproved: true,\n                  isRejected: false,\n                  isNominated: false\n                });\n\n              case 16:\n                if (!(name === 'Reject')) {\n                  _context2.next = 20;\n                  break;\n                }\n\n                _context2.next = 19;\n                return contract.methods.updateRequestStatus(index, i, RequesterUsername, \"Rejected\").send({\n                  from: accounts[2],\n                  gas: 6721975\n                }).then(function (receipt) {\n                  console.log(receipt);\n                }).catch(function (error) {\n                  console.log(error);\n                });\n\n              case 19:\n                _this.setState({\n                  isRequested: false,\n                  isApproved: false,\n                  isRejected: true,\n                  isNominated: false\n                }); // this.props.refresh()\n\n\n              case 20:\n                if (!(name === 'Nominate')) {\n                  _context2.next = 24;\n                  break;\n                }\n\n                _context2.next = 23;\n                return contract.methods.updateRequestStatus(index, i, RequesterUsername, \"Nomianted\").send({\n                  from: accounts[2],\n                  gas: 6721975\n                }).then(function (receipt) {\n                  console.log(receipt);\n                }).catch(function (error) {\n                  console.log(error);\n                });\n\n              case 23:\n                _this.setState({\n                  isRequested: false,\n                  isApproved: false,\n                  isRejected: false,\n                  isNominated: true,\n                  loaderStart: false\n                });\n\n              case 24:\n                i++;\n                _context2.next = 7;\n                break;\n\n              case 27:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2);\n      }));\n\n      return function (_x) {\n        return _ref2.apply(this, arguments);\n      };\n    }();\n\n    _this.doNominate = /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3() {\n      var _this$props$userObjec2, contract, accounts, _this$props2, RequesterUsername, electionHash, place;\n\n      return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              _this.setState({\n                loaderStart: true\n              });\n\n              _this$props$userObjec2 = _this.props.userObject, contract = _this$props$userObjec2.contract, accounts = _this$props$userObjec2.accounts;\n              _this$props2 = _this.props, RequesterUsername = _this$props2.RequesterUsername, electionHash = _this$props2.electionHash, place = _this$props2.place;\n              _context3.next = 5;\n              return contract.methods.addCandidate(electionHash, RequesterUsername, place).send({\n                from: accounts[2],\n                gas: 6721975\n              }).then(function (receipt) {\n                console.log(receipt);\n              }).catch(function (error) {\n                console.log(error);\n              });\n\n            case 5:\n              _this.setState({\n                loaderStart: false\n              });\n\n              _this.doApprove(\"Nominate\");\n\n              alert(\"Candidate Added to Election\");\n\n            case 8:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, _callee3);\n    }));\n    var approve = false,\n        reject = false,\n        nominate = false,\n        request = false;\n    if (_this.props.status === \"Requested\") request = true;\n    if (_this.props.status === \"Approved\") approve = true;\n    if (_this.props.status === \"Rejected\") reject = true;\n    if (_this.props.status === \"Nomianted\") nominate = true;\n    _this.state = {\n      isRequested: request,\n      isApproved: approve,\n      isRejected: reject,\n      isNominated: nominate,\n      electionData: null,\n      loaderStart: false\n    };\n    return _this;\n  }\n\n  _createClass(CandidateRequest, [{\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      console.log(this.props);\n      console.log(this.state);\n      var hide = {\n        display: 'none'\n      };\n      var show = {\n        display: 'block'\n      };\n      return /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 166,\n          columnNumber: 13\n        }\n      }, this.state.electionData && /*#__PURE__*/React.createElement(Card, {\n        className: \"RequestCard\",\n        elevation: 5,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 169,\n          columnNumber: 19\n        }\n      }, /*#__PURE__*/React.createElement(CardContent, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 170,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(Typography, {\n        varient: \"h4\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 171,\n          columnNumber: 23\n        }\n      }, this.state.electionData.typeOfElection), /*#__PURE__*/React.createElement(Typography, {\n        className: \"RequestCardText2\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 174,\n          columnNumber: 23\n        }\n      }, this.state.electionData.constituency), /*#__PURE__*/React.createElement(Person, {\n        className: \"personIcon\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 177,\n          columnNumber: 23\n        }\n      }), /*#__PURE__*/React.createElement(Typography, {\n        varient: \"h4\",\n        className: \"RequestCardText3\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 178,\n          columnNumber: 23\n        }\n      }, this.props.RequesterUsername), /*#__PURE__*/React.createElement(Typography, {\n        varient: \"h6\",\n        className: \"RequestCardText4\",\n        color: \"textSecondary\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 181,\n          columnNumber: 23\n        }\n      }, this.props.status)), /*#__PURE__*/React.createElement(CardActions, {\n        style: {\n          marginTop: \"-5px\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 185,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(Button, {\n        color: \"primary\",\n        variant: \"outlined\",\n        size: \"small\",\n        style: this.state.isApproved || this.state.isNominated ? hide : show,\n        onClick: function onClick() {\n          return _this2.doApprove(\"Approve\");\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 186,\n          columnNumber: 21\n        }\n      }, \"Approve\"), /*#__PURE__*/React.createElement(Button, {\n        color: \"secondary\",\n        variant: \"outlined\",\n        size: \"small\",\n        style: this.state.isApproved || this.state.isNominated || this.state.isRejected ? hide : show,\n        onClick: function onClick() {\n          return _this2.doApprove(\"Reject\");\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 195,\n          columnNumber: 21\n        }\n      }, \"Reject\"), /*#__PURE__*/React.createElement(Button, {\n        color: \"secondary\",\n        variant: \"outlined\",\n        size: \"small\",\n        style: this.state.isApproved ? show : hide,\n        onClick: this.doNominate,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 204,\n          columnNumber: 21\n        }\n      }, \"Add To Election\"))));\n    }\n  }]);\n\n  return CandidateRequest;\n}(Component);\n\nexport { CandidateRequest as default };","map":{"version":3,"sources":["/home/utkarsh/study2/proj/DigiVote/client/src/Organizer/CandidateRequest.jsx"],"names":["React","Component","Card","CardActions","CardContent","Button","Typography","ipfsFetcher","Person","Fade","CircularProgress","CandidateRequest","props","componentWillMount","setState","loaderStart","electionHash","electionData","doApprove","name","userObject","contract","accounts","RequesterUsername","index","length","methods","candidateRequestsCount","call","then","res","catch","console","error","i","result","getRequest","updateRequestStatus","send","from","gas","receipt","log","isRequested","isApproved","isRejected","isNominated","doNominate","place","addCandidate","alert","approve","reject","nominate","request","status","state","hide","display","show","typeOfElection","constituency","marginTop"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport Card from '@material-ui/core/Card';\nimport CardActions from '@material-ui/core/CardActions';\nimport CardContent from '@material-ui/core/CardContent';\nimport Button from '@material-ui/core/Button';\nimport Typography from '@material-ui/core/Typography';\nimport { ipfsFetcher } from '../ipfsStore';\nimport Person from '@material-ui/icons/Person'\nimport Fade from '@material-ui/core/Fade';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport \"../App.css\"\n\n\nexport default class CandidateRequest extends Component{\n    constructor(props){\n        super(props)\n\n        let approve = false, reject = false, nominate = false, request = false\n\n        if(this.props.status === \"Requested\") request = true        \n        \n        if(this.props.status === \"Approved\") approve = true\n\n        if(this.props.status === \"Rejected\") reject = true\n\n        if(this.props.status === \"Nomianted\") nominate = true\n\n        this.state = {\n            isRequested : request,\n            isApproved : approve,\n            isRejected : reject,\n            isNominated : nominate,\n            electionData : null,\n            loaderStart : false\n        }\n    }\n\n    componentWillMount = async() => {\n\n      this.setState({ loaderStart : true })\n\n      let electionData = await ipfsFetcher(this.props.electionHash)\n      this.setState({\n        electionData, loaderStart : false\n      })\n    }\n\n    doApprove = async(name) => {\n\n      this.setState({ loaderStart : true })\n        \n        const {contract, accounts} = this.props.userObject\n        let {RequesterUsername, index, electionHash } = this.props\n        let length = 0;\n        \n        await contract.methods.candidateRequestsCount(RequesterUsername).call()\n        .then(res => length = res)\n        .catch(console.error)\n\n        for(let i = 0; i < length; i++){\n\n            let result\n            await contract.methods.getRequest(RequesterUsername, i).call()\n            .then(res => result = res)\n            .catch(console.error)\n\n            if(result[1] === electionHash){\n\n                if(name === 'Approve'){\n\n                    await contract.methods.updateRequestStatus(index, i, RequesterUsername, \"Approved\").send({from: accounts[2],gas:6721975})\n                    .then((receipt) => {\n                      console.log(receipt)\n                    })\n                    .catch((error) => {\n                      console.log(error)\n                    });\n\n                    this.setState({\n                      isRequested : false,\n                      isApproved : true,\n                      isRejected : false,\n                      isNominated : false\n                    })\n                }\n\n                if(name === 'Reject'){\n\n                    await contract.methods.updateRequestStatus(index, i, RequesterUsername, \"Rejected\").send({from: accounts[2],gas:6721975})\n                    .then((receipt) => {\n                      console.log(receipt)\n                    })\n                    .catch((error) => {\n                      console.log(error)\n                    });\n\n                    \n                    \n                    this.setState({\n                      isRequested : false,\n                      isApproved : false,\n                      isRejected : true,\n                      isNominated : false\n                    })\n\n                   // this.props.refresh()\n                }\n\n                if(name === 'Nominate'){\n\n                    await contract.methods.updateRequestStatus(index, i, RequesterUsername, \"Nomianted\").send({from: accounts[2],gas:6721975})\n                    .then((receipt) => {\n                      console.log(receipt)\n                    })\n                    .catch((error) => {\n                      console.log(error)\n                    }); \n\n                    this.setState({\n                      isRequested : false,\n                      isApproved : false,\n                      isRejected : false,\n                      isNominated : true,\n                      loaderStart : false\n                    })\n                }\n                \n            }\n        }\n\n    }\n\n    doNominate = async() => {\n\n      this.setState({ loaderStart : true })\n\n        const {contract, accounts} = this.props.userObject\n        let {RequesterUsername, electionHash, place } = this.props\n\n        await contract.methods.addCandidate(electionHash, RequesterUsername, place).send({from: accounts[2],gas:6721975})\n        .then((receipt) => {\n          console.log(receipt)\n        })\n        .catch((error) => {\n          console.log(error)\n        });\n\n        this.setState({ loaderStart : false })\n        this.doApprove(\"Nominate\")\n        alert(\"Candidate Added to Election\")\n\n    }\n\n    render(){\n      console.log(this.props)\n      console.log(this.state)\n        let hide = {\n            display : 'none'\n        } \n\n        let show = {\n            display : 'block'\n        }\n\n        return(\n            <div>\n              {\n                this.state.electionData &&\n                  <Card className=\"RequestCard\" elevation={5}>\n                    <CardContent>\n                      <Typography varient=\"h4\">\n                        {this.state.electionData.typeOfElection}\n                      </Typography>\n                      <Typography className=\"RequestCardText2\">\n                        {this.state.electionData.constituency}\n                      </Typography>\n                      <Person className=\"personIcon\" />\n                      <Typography varient=\"h4\" className=\"RequestCardText3\">\n                        {this.props.RequesterUsername}\n                      </Typography>\n                      <Typography varient=\"h6\" className=\"RequestCardText4\" color=\"textSecondary\">\n                        {this.props.status}\n                      </Typography>\n                    </CardContent>\n                    <CardActions style={{ marginTop : \"-5px\"}}>\n                    <Button \n                      color=\"primary\" \n                      variant=\"outlined\" \n                      size=\"small\" \n                      style={(this.state.isApproved || this.state.isNominated) ? hide : show} \n                      onClick={() => this.doApprove(\"Approve\")}\n                    >\n                      Approve\n                    </Button>\n                    <Button \n                      color=\"secondary\" \n                      variant=\"outlined\" \n                      size=\"small\" \n                      style={(this.state.isApproved || this.state.isNominated || this.state.isRejected) ? hide : show} \n                      onClick={() => this.doApprove(\"Reject\")}\n                    >\n                      Reject\n                    </Button>\n                    <Button \n                      color=\"secondary\" \n                      variant=\"outlined\" \n                      size=\"small\" \n                      style={(this.state.isApproved) ? show : hide} \n                      onClick={this.doNominate} \n                    >\n                      Add To Election\n                    </Button>\n                  </CardActions>\n                  </Card>\n              }\n            </div>\n        )\n    }\n}"]},"metadata":{},"sourceType":"module"}